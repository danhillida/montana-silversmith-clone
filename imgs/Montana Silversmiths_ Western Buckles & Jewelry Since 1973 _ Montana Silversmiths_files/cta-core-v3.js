var bectabarenv,bectabartype,bectabarday,bectabarhour,bectabarconfigpath,bectabarforcepopup,bectabarnoshowbanner,bectabarselector,bectabarpos,bectabarpanelstyle,bectabarbuttonstyle,bectabartext,mobilebectabarpanelstyle,mobilebectabarbuttonstyle,mobilebectabartext,bectabardelay,bectabarinterval,bectabarversion="3.26",BE_CTA_BAR_SCRIPT_ID="bectabarscriptid",BE_CTA_BAR_ID="bebannerid",BE_CTA_BAR_PANEL="bectabarpanelid",BE_CTA_BAR_POPUP="bectabarpopupid",BE_CTA_BAR_CONTAINER="be-ctabar-container",BE_CTA_BAR_CTAID="bectabarctaid",BE_CTA_BAR_DIALOG_ID="bectabardialogid",BE_CTA_BAR_DIALOG_MSG_ID="bectabardialogmessageid",BE_CTA_BAR_CONTROLS_ID="bectabarcontrolscriptid",BE_CTA_BAR_CONFIG_ID="bectabarconfigscriptid",bectabarenabled=!0,bectabartestmode=!1,bectabardebug=!1,bectabaroutofrange=!1,bectabarcustomerId="",bectabarfunctions="",bectabarstylesheet="",befullhtmltext="",bectabarlink="#",mobilebefullhtmltext="",mobilebectabarlink="#",BE_DESKTOP_SCREEN=620,BE_DEVICE_MOBILE="mobile",BE_DEVICE_DESKTOP="desktop",BE_DEVICE_TABLET="tablet",BE_ACT_PAGEVIEW="cta_pageview",BE_ACT_SHOW="cta_show",BE_ACT_CLICK="cta_click",BE_ACT_SUBMIT="cta_submit",BE_ACT_CONVERT="cta_convert",BE_ACT_CONVERTSHOW="cta_convertshow",BE_ACT_NO_SHOW="cta_noshow",BE_ACT_NO_SHOW_NO_BAR_DEFINED="cta_noshow_barnotdefined",BE_ACT_NO_SHOW_SELECTOR_NOTFOUND="cta_noshow_selectornotfound",BE_ACT_NONCTA_PAGEVIEW="noncta_pageview",BE_ACT_NONCTA_CLICK="noncta_click",BE_ACT_NONCTA_SHOW="noncta_show",BE_ACT_NONCTA_CONVERTSHOW="noncta_convertshow",BE_ACT_NONCTA_CONVERT="noncta_convert",BE_PAGETYPE_PAGE=0,BE_PAGETYPE_DOWNLOAD=1,BE_PAGETYPE_CALL=2,BE_PAGETYPE_FORM=3,BE_PAGETYPE_FORM_WITH_VALIDATE=4,BE_REFERER_FROM_BANNER=0,BE_REFERER_DIRECT_FROM_CONVERT=1,bectabarpopuponscroll=!1;bectabarInit();function bectabarInit(){document.getElementsByTagName("body")[0]?enablebectabar(null):document.addEventListener("DOMContentLoaded",function(){enablebectabar(null)})}function beCtaGetBanner(e,t){var n=Math.floor;function a(e,t,n){e=e.replace(window.location.search,"").replace(/(\/?\??#?!?|\??#.*|\/#.*)$/,"");for(var a,r=0;r<t.length;r++){if(a=beGetPathFromUrl(t[r]).replace(/(\/$)/,""),beprint(" <"+r+"> exclusion check: match_page="+n+", url="+e+", excludePage="+a),"*"===a||"all"===a)return beprint(" <"+r+"> current page is excluded with "+a+" match."),!0;if("startsWith"===n&&e.startsWith(a))return beprint(" <"+r+"> current page is excluded (startswith)"),!0;if(e===a)return beprint(" <"+r+"> current page is excluded (absolute)"),!0}return!1}function r(e,t){var n=window.location.href,r=t&&t.exclude_pages||[],o=t&&t.match_page||"absolute";if(beprint(" exclusion check: match_page="+o+", exclude_pages.len="+r.length+", currPage="+n),a(n,r,o))return!0;if(BE_CTA_BAR_CONFIG&&BE_CTA_BAR_CONFIG.settings&&BE_CTA_BAR_CONFIG.settings.convert_list){var s=BE_CTA_BAR_CONFIG.settings.convert_list;beprint(" convertpage check: match_page="+o+", convert_list.len="+s.length+", page="+e);for(var c,d=0;d<s.length;d++)if(c=s[d].page&&s[d].page.replace(/(\/$)/,""),beprint(" ("+d+") convertpage check: match_page="+o+", showBanner="+s[d].showBanner+", convertpage="+c+", page="+e),!0!==s[d].showBanner){if("startsWith"===o&&e.startsWith(c))return beprint(" ("+d+") convertpage is excluded (startswith)"),!0;if(c===e)return beprint(" ("+d+") convertpage is excluded (absolute)"),!0}}return!1}function o(e,t){if(!e||0===e.length||1===e.length&&""===e[0])return!1;if(1===e.length&&("all"===e[0]||"*"===e[0])){var n=window.location.href.replace(window.location.search,"").replace(/(\/?\??#?!?|\??#.*|\/#.*)$/,"");return!r(n,t)||(beprint(" banner is configured for all pages but this page is excluded (convert page), do not show banner for this page"),!1)}for(var a,n=window.location.href.replace(window.location.search,"").replace(/(\/?\??#?!?|\??#.*|\/#.*)$/,""),o=t&&t.match_page||"absolute",s=0;s<e.length;s++){a=beGetPathFromUrl(e[s]).replace(/(\/$)/,""),beprint(" {"+s+"} checking page="+a+", currPage="+n+", match_page="+o);var c=!1;if("startsWith"===o&&n.startsWith(a)?c=!0:n===a&&(c=!0),c)return(beprint(" {"+s+"} page matched, now check if excluded/convert page"),r(a,t))?(beprint(" {"+s+"} page is valid but excluded (convert page), do not show banner for this page"),!1):(beprint(" {"+s+"} page is valid"),!0);beprint(" {"+s+"} page did not matched")}return!1}function s(e,t,n){if(!e||t&&"*"==t)return!0;var a=e[t];if(a){if("*"==a||"all"==a||n&&"*"==n)return!0;a=a.split(",");for(var r=0;r<a.length;r++)if(n==a[r])return!0}return!1}function c(){if(BE_CTA_BAR_CONFIG&&BE_CTA_BAR_CONFIG.settings&&BE_CTA_BAR_CONFIG.settings.iframe_settings){var e=BE_CTA_BAR_CONFIG&&BE_CTA_BAR_CONFIG.settings&&BE_CTA_BAR_CONFIG.settings.iframe_settings,t=e&&e.disabled_parent_pages||["*"],n=e&&e.match_page||"absolute";return current_location=window.location.href,parent_location=window.parent.location.href,current_location===parent_location?(beprint("Not loaded in iframe. Continuing.."),!1):a(parent_location,t,n)}return beprint("Found no iframe settings."),!1}if(beprint("get bannerid from settings, ctabarenabled?"+e+", bannerid="+t),"undefined"!=typeof BE_CTA_BAR_CONFIG&&BE_CTA_BAR_CONFIG&&BE_CTA_BAR_CONFIG.settings&&BE_CTA_BAR_CONFIG.settings.active_banners){beprint("checking from BE_CTA_BAR_CONFIG");for(var d,l=0;l<BE_CTA_BAR_CONFIG.settings.active_banners.length;l++){d=BE_CTA_BAR_CONFIG.settings.active_banners[l];var b=d.pages||["*"];if(beprint("["+l+"] checking pages="+b),o(b,d)){beprint("["+l+"] valid page");var g=!1,p=beCtaIsDesktop(),u=d.device||"*";if(u)if(u=u.toLowerCase(),"all"===u||"*"===u?g=!0:p&&u===BE_DEVICE_DESKTOP?g=!0:!p&&(u===BE_DEVICE_MOBILE||u===BE_DEVICE_TABLET)&&(g=!0),g){if(beprint("["+l+"] valid device"),c()){beprint("Page loaded in an iframe from a RESTRICTED page.");continue}if(!t){beprint("perform timing check & random logic");var f=d.days_hours,m=new Date,h=bectabarday||m.getUTCDay(),y=bectabarhour||m.getUTCHours();if(bectabarday&&!bectabarhour&&(y="*"),s(f,h,y)){beprint("valid timing");var _=n(100*Math.random()+1);beprint("randomized value="+_);var v=null;bectabarnoshowbanner=null;for(var E=0;E<d.banners.length;E++){var T=d.banners[E],C=T.startrange?parseInt(T.startrange):0,A=T.endrange?parseInt(T.endrange):0;!v&&_>=C&&_<=A&&(beprint("found matching bannerid="+T.bannerid),v=T),bectabarnoshowbanner||0!==C||0!==A||(bectabarnoshowbanner=T.bannerid,beprint("found default/no-bannerid="+bectabarnoshowbanner))}return e&&!v&&(beprint("valid page, device & timing but no valid range"),bectabaroutofrange=!0),v}beprint("invalid timing!")}else if(e){beprint("ignore timing check & random logic, just search for bannerid "+t);for(var T,E=0;E<d.banners.length;E++)if(T=d.banners[E],t==T.bannerid)return beprint("found banner for id "+t),T}}else beprint("["+l+"] invalid device")}else beprint("["+l+"] invalid page")}}return beprint("no matching bannerid"),null}function beCtaBarFindBanner(e){if("undefined"!=typeof BE_CTA_BAR_CONFIG&&BE_CTA_BAR_CONFIG&&BE_CTA_BAR_CONFIG.settings&&BE_CTA_BAR_CONFIG.settings.active_banners){beprint("checking banner "+e+" from BE_CTA_BAR_CONFIG");for(var t,n=0;n<BE_CTA_BAR_CONFIG.settings.active_banners.length;n++){t=BE_CTA_BAR_CONFIG.settings.active_banners[n];for(var a,r=0;r<t.banners.length;r++)if(a=t.banners[r],e==a.bannerid)return a}}return null}function beCtaBarGetDefinition(e){var t;if(e&&"undefined"!=typeof BE_CTA_BAR_CONFIG&&BE_CTA_BAR_CONFIG&&BE_CTA_BAR_CONFIG.definitions)for(var n=BE_CTA_BAR_CONFIG.definitions,a=n.length,i=0;i<a;i++)if(n[i].bannerid==e){t=n[i];break}return t}function beCtaGetBarTypeParameter(){return bectabartype=begetParameterByName("bectabar-type"),beprint("bectabartype (param)="+bectabartype),bectabartype}function beCtaIsPageConvert(){if(BE_CTA_BAR_CONFIG&&BE_CTA_BAR_CONFIG.settings&&BE_CTA_BAR_CONFIG.settings.convert_list)for(var e,t=BE_CTA_BAR_CONFIG.settings.convert_list,n=window.location.href.replace(window.location.search,"").replace(/(\/?\??#?!?|\??#.*|\/#.*)$/,""),a=0;a<t.length;a++)if(e=beGetPathFromUrl(t[a].page).replace(/(\/$)/,""),e===n)return!0;return!1}function beCtaIsPopupsDisabledFromConfig(){return beCtaIsPopupDisabledOnConvert()||beCtaIsPopupDisabledOnClose()||beCtaIsPopupDisabledOnEscape()}function beCtaIsPopupDisabledOnConvert(){if(BE_CTA_BAR_CONFIG&&BE_CTA_BAR_CONFIG.settings&&"undefined"!=typeof BE_CTA_BAR_CONFIG.settings.popup_disable_on_convert){var e=BE_CTA_BAR_CONFIG.settings.popup_disable_on_convert;return!0===e||"true"===e}return!0}function beCtaIsPopupDisabledOnClose(){if(BE_CTA_BAR_CONFIG&&BE_CTA_BAR_CONFIG.settings&&"undefined"!=typeof BE_CTA_BAR_CONFIG.settings.popup_disable_on_close){var e=BE_CTA_BAR_CONFIG.settings.popup_disable_on_close;return!0===e||"true"===e}return!1}function beCtaIsPopupDisabledOnEscape(){if(BE_CTA_BAR_CONFIG&&BE_CTA_BAR_CONFIG.settings&&"undefined"!=typeof BE_CTA_BAR_CONFIG.settings.popup_disable_on_esc){var e=BE_CTA_BAR_CONFIG.settings.popup_disable_on_esc;return!0===e||"true"===e}return!1}function beCtaIsPopupActivateOnScroll(){if(BE_CTA_BAR_CONFIG&&BE_CTA_BAR_CONFIG.settings&&"undefined"!=typeof BE_CTA_BAR_CONFIG.settings.popup_activate_on_scroll){var e=BE_CTA_BAR_CONFIG.settings.popup_activate_on_scroll;return!0===e||"true"===e}return!1}function beCtaIsExistingUser(){if(BE_CTA_BAR_CONFIG&&BE_CTA_BAR_CONFIG.settings&&BE_CTA_BAR_CONFIG.settings.login_cookie){var e=BE_CTA_BAR_CONFIG.settings.login_cookie;if(e.name){var t=begetCookie(e.name);if(null!==t&&("undefined"==typeof e.value||"*"===e.value||t===e.value))return!0}}return!1}function beCtaGetPopupCloseInterval(){return beCtaGetInterval("popup_close_interval")}function beCtaGetPopupEscInterval(){var e=beCtaGetInterval("popup_esc_interval");return null==e&&(e=beCtaGetInterval("popup_close_interval")),e}function beCtaGetPopupConvertInterval(){return beCtaGetInterval("popup_convert_interval")}function beCtaGetInterval(e){function t(e){return e!==void 0&&0<parseInt(e)?e:void 0}var n=t(BE_CTA_BAR_CONFIG&&BE_CTA_BAR_CONFIG.settings&&BE_CTA_BAR_CONFIG.settings[e]);if(n==null){var a=beCtaBarGetDefinition(bectabartype);a&&a.config&&(n=t(a.config[e]))}return n}function enablebectabar(e){function t(){if(BE_CTA_BAR_CONFIG&&BE_CTA_BAR_CONFIG.settings){var e=BE_CTA_BAR_CONFIG.settings.homepage,t=window.location.href.replace(window.location.search,"").replace(/(\/?\??#?!?|\??#.*|\/#.*)$/,"");return beprint("isHomePage homepage="+e+" vs currPage="+t),e?e===t:null}return null}var n=document.getElementById(BE_CTA_BAR_SCRIPT_ID);if(n){bectabarcustomerId=n.getAttribute("data-customerid"),bectabarconfigpath=n.getAttribute("data-configpath");var a=begetParameterByName("bectabar-debug");a||(a=begetCookie("BE_CTA_DEBUG_"+bectabarcustomerId)),"true"===a&&(bectabardebug=!0),beprint("[CTABAR-START] bectabarversion=3.26"),beprint("data-customerid="+bectabarcustomerId),beprint("data-configpath="+bectabarconfigpath),bectabartestmode=n.getAttribute("data-testmode");var i=begetParameterByName("bectabar-testpage");if(beprint("data-testmode (script)="+bectabartestmode),beprint("bectabar-testpage (param)="+i),bectabartestmode&&"true"===bectabartestmode)beprint("ctabar is on TEST MODE."),bectabarenabled=!1,i||(i=begetCookie("BE_CTA_TESTMODE_"+bectabarcustomerId),beprint("testpage (cookie)="+i)),i&&"true"===i?(bectabarenabled=!0,beprint("ctabar is enabled (Test mode)")):beprint("ctabar is disabled (Test mode)"),bectabarenv=begetParameterByName("bectabar-env");else{beprint("ctabar is on LIVE MODE!"),bectabarenabled=!0;var r=begetParameterByName("bectabar-activate");beprint("testactivate (param)="+r),r||(r=begetCookie("BE_CTA_ACTIVATE_"+bectabarcustomerId),beprint("testactivate (cookie)="+r)),r&&"false"===r?(bectabarenabled=!1,beprint("ctabar is deactivated (Live mode)")):beprint("ctabar is enabled (Live mode)")}bectabartype=beCtaGetBarTypeParameter(),bectabarday=begetParameterByName("bectabar-day"),bectabarhour=begetParameterByName("bectabar-hour"),beprint("bectabarenabled="+bectabarenabled),beprint("bectabarenv="+bectabarenv),beprint("bectabartype="+bectabartype),beprint("bectabardebug="+bectabardebug);var o=begetParameterByName("bectabar-configpath");if(beprint("bectabarconfigpathparam="+o),o&&(bectabarconfigpath=o),bectabarenabled){function e(e){beprint("onBeCtaBarConfigLoad: config="+("undefined"==typeof BE_CTA_BAR_CONFIG?null:BE_CTA_BAR_CONFIG)+", evt="+e);var n,a=beCtaIsPageConvert();if(beprint("is convert page?"+a),bectabartype){beprint("has banner type param: "+bectabartype);var i=beCtaGetBanner(bectabarenabled,bectabartype),r=i?i.bannerid:"";if(beprint("bannerid (from settings)="+r),i){n=i;var o=i.startrange?parseInt(i.startrange):0,s=i.endrange?parseInt(i.endrange):0;0===o&&0===s?(bectabaroutofrange=!0,bectabarnoshowbanner=i.bannerid,beprint("specified banner is a noncta_show!")):beprint("OK, specified banner is a cta_show")}}else beprint("no banner type param"),bectabarday||bectabarhour?(n=beCtaGetBanner(bectabarenabled),bectabartype=n?n.bannerid:"",beprint("bectabartype (from settings)="+bectabartype)):(bectabartype=beCtaGetBannerIdFromCookie(),beprint("bectabartype (from cookie)="+bectabartype),bectabartype?(beprint("bannerid has it from cookie"),n=beCtaGetBanner(bectabarenabled,null),bectabartype=n?n.bannerid:"",beprint("ok, bectabartype (from settings)="+bectabartype)):(beprint("still no banner id, get it from settings"),n=beCtaGetBanner(bectabarenabled),bectabartype=n?n.bannerid:"",beprint("bectabartype (from settings)="+bectabartype)));!n&&bectabaroutofrange&&bectabarnoshowbanner&&(beprint("getting outofrannge banner: "+bectabarnoshowbanner),n=beCtaBarFindBanner(bectabarnoshowbanner));var c=null,d=t();if(!a){beprint("this is not convertpage, banner/home page... is homepage?"+d),besetCookie("BE_CTA_TESTMODE_"+bectabarcustomerId,"false");var l=begetParameterByName("bectabar-testpage");beprint("url testpage="+l),l&&"true"===l?besetCookie("BE_CTA_TESTMODE_"+bectabarcustomerId,"true"):bectabartestmode&&"true"===bectabartestmode&&(beprint("disabling now, could have been enabled earlier when testpage=true was taken from cookie (in Test mode)"),bectabarenabled=!1)}else{beprint("this is a convert page, also a homepage?"+d);var l=begetParameterByName("bectabar-testpage");beprint("url testpage="+l),l&&"true"===l?besetCookie("BE_CTA_TESTMODE_"+bectabarcustomerId,"true"):d&&besetCookie("BE_CTA_TESTMODE_"+bectabarcustomerId,"false"),bectabarenabled&&!d&&beprint("this is a convert page (not homepage) but with banner")}if(beprint("final check, is ctabar enabled?"+bectabarenabled),!bectabarenabled)beprint("[CTABAR-END] not enabled (final)");else if(beprint("[CTABAR] enabled (final)"),beCtaAddConvertPageTracking(!0,null,c,a,d),n){if(beprint("has banner, isConvertPage?"+a),!a){beprint("not convert page");var b=beCtaGetUserId();b?beprint("referer: existing user coming from page with cta banner"):(beprint("referer: first-time user coming from page with cta banner"),beCtaCreateUserId());var g=null,c=null;besetCookieInHours("BE_CTA_REFERER_"+bectabarcustomerId,""+BE_REFERER_FROM_BANNER,c)}else beprint("convert page");bectabarSet(),beprint("[CTABAR-END] enabled and has banner")}else beprint("[CTABAR-END] enabled but no banner")}function a(t){beprint(">>> injecting bectabar config js: "+t);var a=document.createElement("script");a.type="text/javascript",a.id=BE_CTA_BAR_CONFIG_ID,a.async="true",a.src=bectabarconfigpath,a.addEventListener("load",e,!1),n.parentNode.appendChild(a)}beprint("ctabar is enabled, loading..."),beprint("bectabarday="+bectabarday),beprint("bectabarhour="+bectabarhour),bectabarconfigpath?a(bectabarconfigpath):"undefined"==typeof BE_CTA_BAR_CONFIG?(bectabarconfigpath="https://cta-cf.bc0a.com/js/cta_"+bectabarcustomerId+".js",beprint("BE_CTA_BAR_CONFIG not defined, using default bectabar configpath="+bectabarconfigpath),a(bectabarconfigpath)):(beprint("BE_CTA_BAR_CONFIG is defined!"),e())}else beprint("[CTABAR-END] not enabled")}}function beCtaIsPageSameLastPage(){var e=document.referrer&&beGetPathFromUrl(document.referrer).replace(/(\/$)/,"")||"",t=beGetPathFromUrl(window.location.href).replace(/(\/$)/,"");return beprint("beCtaIsPageSameLastPage prev="+e+", curr="+t),e===t}function beCtaAddConvertPageTracking(e,t,n,a,i){if(beprint("beCtaAddConvertPageTracking logEvent="+e+", noInjectDelay="+t+", hours="+n+", isConvertPage="+a+", is_homepage="+i),BE_CTA_BAR_CONFIG&&BE_CTA_BAR_CONFIG.settings&&BE_CTA_BAR_CONFIG.settings.convert_list){var r=BE_CTA_BAR_CONFIG.settings.convert_list,o=t?1:BE_CTA_BAR_CONFIG.settings.event_delay||1;(0===o||"0"===o)&&(o=1),beprint(">>> injecting convert events count: "+r.length+", injectdelay="+o+"ms, logEvent?"+e),setTimeout(function(){beprint(">>> injecting convert events after "+o+"ms delay");for(var t,a=window.location.href.replace(window.location.search,"").replace(/(\/?\??#?!?|\??#.*|\/#.*)$/,""),s=0;s<r.length;s++)if(t=beGetPathFromUrl(r[s].page).replace(/(\/$)/,""),beprint(" ["+s+"] checking for page: "+t+" vs currpage="+a),t===a){beprint(" ["+s+"] current page matched");var c=beCtaGetUserId();c||beCtaCreateUserId();var d=!1,l=beCtaGetClickedBannerIdFromCookie();beprint("clicked bannerid from cookie="+l),l&&beCtaCheckConvertTargetPage(l)?beprint("ok, previously clicked banner target matches this convert page"):(l?beprint("wrong, previously clicked banner target did not match this convert page, bectabarnoshowbanner="+bectabarnoshowbanner):beprint("no previously clicked banner, bectabarnoshowbanner="+bectabarnoshowbanner),l=bectabarnoshowbanner||"unknown",d=!0,beprint("now using banner "+l+" instead"));var b="true"===d||!0==d?BE_ACT_NONCTA_CONVERTSHOW:BE_ACT_CONVERTSHOW,g=begetCookie("BE_CTA_REFERER_"+bectabarcustomerId);beprint(" ["+s+"] adding event for action="+b+", bannerid="+l+", outofrange?"+d+", referertype="+g),"unknown"===l?(b=BE_ACT_NONCTA_CONVERTSHOW,c?beprint("referer: (no banner) existing user direct from convert page, action="+b):beprint("referer: (no banner) first-time user direct from convert page, action="+b),!g&&besetCookieInHours("BE_CTA_REFERER_"+bectabarcustomerId,""+BE_REFERER_DIRECT_FROM_CONVERT,n)):(c?beprint("referer: existing user coming from convert page (with prev active banner)"):beprint("referer: first-time user coming from convert page (with prev active banner)?"),!g&&besetCookieInHours("BE_CTA_REFERER_"+bectabarcustomerId,""+BE_REFERER_FROM_BANNER,n));var p=beCtaIsPageSameLastPage();beprint(" ["+s+"] is convert page same as banner page... showBanner?"+r[s].showBanner+", currSameLastPage?"+p+", logEvent?"+e+", action="+b),e&&(!0!==r[s].showBanner||p)&&beCtaCallBeEndpoint(b,{bannerid:l});var u=r[s].iframe_selectors;u?0===u.length&&(u=["body"]):u=["body"],beprint(" ["+s+"] injecting on page: "+r[s].page+", frames:"+u.length);for(var f=0;f<u.length;f++){var m=document.querySelector(u[f]),h=null;if("body"===u[f]?h=m:(h=m.contentWindow||m.contentDocument,h.document&&(h=h.document)),h){beprint(" ["+s+"]["+f+"] injecting for body/iframe selector: "+u[f]);for(var y=0;y<r[s].selectors.length;y++){beprint(" ["+s+"]["+f+"] injecting for selector["+y+"]="+r[s].selectors[y]);var _=h.querySelector(r[s].selectors[y]);_?(_.setAttribute("data-becta-name",r[s].name),_.setAttribute("data-becta-barid",l),_.setAttribute("data-becta-nbs",d),_.setAttribute("data-becta-type",r[s].type),beprint("["+s+"]["+f+"] found element, adding click listener... bannerid: "+l+", baroutofrange?"+d),_.addEventListener("click",function(e){var t=this.getAttribute("data-becta-barid"),n=this.getAttribute("data-becta-name"),a=this.getAttribute("data-becta-nbs"),i=this.getAttribute("data-becta-type"),r="true"===a||!0==a?BE_ACT_NONCTA_CONVERT:BE_ACT_CONVERT;beprint("clicked convert name="+n+", ctanbs="+a+", action="+r+", bannerid="+t+", ctatype="+i),"EmbeddedForm"!==i&&beCtaCallBeEndpoint(r,{bannerid:"null"===t?"unknown":t,ctaid:n,element:this})},!0)):beprint(" ["+s+"]["+f+"] no element for selector "+r[s].selectors[y])}}else beprint(" ["+s+"]["+f+"] no element for body/iframe selector: "+u[f])}setTimeout(function(){beprint(" ["+s+"] checking... logEvent?"+e+", action="+b+", type="+r[s].type+", page="+r[s].page),e&&"Page"===r[s].type&&(b===BE_ACT_CONVERTSHOW?beCtaCallBeEndpoint(BE_ACT_CONVERT,{bannerid:l}):beCtaCallBeEndpoint(BE_ACT_NONCTA_CONVERT,{bannerid:l}))},30);break}},o)}}function beGetPathFromUrl(e){return e.split(/[?#]/)[0]}function begetParameterByName(e){var t=RegExp("[?&]"+e+"=([^&]*)").exec(window.location.search);return t&&decodeURIComponent(t[1].replace(/\+/g," "))}function beGetAttrVal(e,t,n){var a=e.getAttribute(t);return a&&0<a.length?a:n}function beGetConfigVal(e,t,n){var a=e[t];return a&&0<a.length?a:n}function bevalidateEmail(e){var t=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}function bevalidatePhone(e,t){if(!e)return!1;e=e.replace(/[+-\s]/g,"");var n=/^\d+$/.test(e);return n&&t&&(n=e.length===t),n}function bevalidateName(e){return!!e&&!/^\d/.test(e)}function bereportValidity(e,t){e&&(t&&e.setCustomValidity(t),e.reportValidity())}function becreateUDID(){var e=Math.floor,t=new Date().getTime(),n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var a=0|(t+16*Math.random())%16;return t=e(t/16),("x"==n?a:8|3&a).toString(16)});return n}function beCtaGetUserId(e){var t=begetCookie("BE_CTA_UDID_"+bectabarcustomerId);return!t&&e?t=beCtaCreateUserId():beprint("bectabar USERID="+t),t}function beCtaCreateUserId(){var e=becreateUDID();return besetCookie("BE_CTA_UDID_"+bectabarcustomerId,e,7e3),beprint("bectabar new USERID="+e),e}function beCtaIsDesktop(){return!!(window.innerWidth>BE_DESKTOP_SCREEN)}function beCtaGetBannerIdFromCookie(){var e=begetCookie("BE_CTA_BANNER_"+bectabarcustomerId);return e}function beCtaGetClickedBannerIdFromCookie(){var e=begetCookie("BE_CTA_CLICKED_"+bectabarcustomerId);return e}function beCtaSetClickedBannerIdToCookie(){var e=bectabartype||bectabarnoshowbanner||"unknown";besetCookie("BE_CTA_CLICKED_"+bectabarcustomerId,e,7e3)}function beCtaCheckConvertTargetPage(e,t){var n=beCtaBarGetDefinition(e);if(n&&n.convertinfo&&n.convertinfo.cta_list){function e(e){return!!(-1<e.indexOf("Popup")||-1<e.indexOf("tel:")||t===BE_PAGETYPE_CALL||t===BE_PAGETYPE_DOWNLOAD)||(e=beGetPathFromUrl(e).replace(/(\/$)/,""),r===e)}for(var a,r=window.location.href.replace(window.location.search,"").replace(/(\/?\??#?!?|\??#.*|\/#.*)$/,""),o=0;o<n.convertinfo.cta_list.length;o++)if(a=n.convertinfo.cta_list[o].target||"",a)if(Array.isArray(a)){for(var s=0;s<a.length;s++)if(e(a[s]))return!0;}else if(e(a))return!0}return!1}function beCtaGetApiData(e,t){var n;"function"==typeof beCtaGetApiCustomData&&(n=beCtaGetApiCustomData());var a,i,r,o,s=1;t&&(i=t.ctaid,r=t.element,a=t.bannerid,s=t.eventtype||1,o=t.pageType||""),!i&&r&&(i=r.id?r.id:r.className?r.tagName+"."+r.className:r.tagName);var c=begetParameterByName("bectabar-testpage");if(beprint("testmodeparam="+c),c&&"true"===c)s=0;else if(!c){var d=begetCookie("BE_CTA_TESTMODE_"+bectabarcustomerId);beprint("testmodecookie="+d),d&&"true"===d&&(s=0)}var l=beCtaGetClickedBannerIdFromCookie(),b=begetCookie("BE_CTA_REFERER_"+bectabarcustomerId);beprint("beCtaGetApiData action="+e+", pageType="+o+", eventtype="+s+", referertype="+b+", bannerid="+a+", clickedBannerId="+l+", bectabarnoshowbanner="+bectabarnoshowbanner);var g={customerid:bectabarcustomerId||"unkown",userid:beCtaGetUserId(),bannerid:a||"unknown",ctaid:i,action:e,eventtype:s,referertype:b&&parseInt(b),page:window.location.href,ua:navigator.userAgent};if(n&&(g.endpointdata=n,g.ctadata=n),e===BE_ACT_CONVERTSHOW||e===BE_ACT_CONVERT||e===BE_ACT_SUBMIT||e===BE_ACT_NONCTA_CONVERTSHOW||e===BE_ACT_NONCTA_CONVERT){var p=document.getElementById(BE_CTA_BAR_PANEL);if(p&&o!==BE_PAGETYPE_FORM_WITH_VALIDATE&&o!==BE_PAGETYPE_CALL&&o!==BE_PAGETYPE_DOWNLOAD||(l=a),beprint("fin clickedBanner="+l+", bannerid="+a),l&&beCtaCheckConvertTargetPage(l,o))g.bannerid=l,beprint("clicked banner "+l+" takes credit for "+e);else{var u=bectabarnoshowbanner||"unknown";beprint("banner "+u+" takes credit for "+e),g.bannerid=u}}return g}function beCtaPostEndpoint(e,t,n,a){function i(e,t){e&&e(t)}function r(e,t){e&&e(t)}if(beprint("beCtaPostEndpoint referer="+window.document.referrer),window.document.referrer&&!t.referer&&(t.referer=window.document.referrer),t.timestamp=Date.now(),beprint("beCtaPostEndpoint api URL="+e),beprint("beCtaPostEndpoint api data="+JSON.stringify(t)),window.fetch)fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){e&&e.json().then(function(e){beprint("beCtaPostEndpoint success response json="+(e?JSON.stringify(e):"")),i(n,e)})}).catch(function(e){console.error("beCtaPostEndpoint Error",e),r(a,e)});else{var o;o=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),o.onreadystatechange=function(){beprint("beCtaPostEndpoint onreadystatechange(IE) state="+this.readyState+", status="+this.status),4==this.readyState&&(200<=this.status&&300>this.status?(beprint("beCtaPostEndpoint success response(IE) response="+this.responseText),i(n,this.responseText)):r(a,this.responseText))},o.open("POST",e,!0),o.setRequestHeader("Content-Type","application/json"),o.send(JSON.stringify(t))}}function beCtaPostFormData(e,t,n){if(e)if(window.fetch)fetch(e.action,{method:"POST",body:new FormData(e)}).then(function(e){"function"==typeof t&&t(e)}).catch(function(e){"function"==typeof n&&n(e)});else{var a;a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),a.onreadystatechange=function(){beprint("onreadystatechange(IE) state="+this.readyState+", status="+this.status),4==this.readyState&&(200<=this.status&&300>this.status?"function"==typeof t&&t(this.responseText):"function"==typeof n&&n(this.responseText))},a.open("POST",e.action,!0),a.send(new FormData(e))}}function beCtaHttpGetJson(e,t,n){if(beprint("beCtaHttpGet url="+e),window.fetch)fetch(e).then(function(e){return beprint("beCtaHttpGet response="+e),e.json()}).then(function(e){beprint("beCtaHttpGet jsonresp="+e),t&&"function"==typeof t&&t(e)}).catch(function(e){console.error("beCtaHttpGet Error",e),n&&"function"==typeof n&&n(e)});else{var a;a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),a.onreadystatechange=function(){beprint("beCtaHttpGet onreadystatechange(IE) state="+this.readyState+", status="+this.status),4==this.readyState&&(200<=this.status&&300>this.status?(beprint("beCtaHttpGet success response(IE) response="+this.responseText),t&&"function"==typeof t&&t(JSON.parse(this.responseText))):n&&"function"==typeof n&&n())},a.open("GET",apiUrl,!0),a.send(null)}}function beCtaCallBeEndpoint(e,t,n,a){var i=["bot","google","slurp","spider","alexa","facebook","crawler","acunetix-deepscan"],r=navigator.userAgent.toLowerCase(),o=bectabarSome(i,function(e){return-1<r.indexOf(e)});if(o)return void beprint("bot, ignoring "+r);var s="https://cta-cdn.bc0a.com/addeventtoqueue";bectabartestmode&&("true"===bectabartestmode||!0==bectabartestmode)&&(bectabarenv=bectabarenv?bectabarenv.toLowerCase():"",s="prod"===bectabarenv||"production"===bectabarenv?"https://cta-cdn.bc0a.com/addeventtoqueue":"https://cta-qa-cdn.bc0a.com/addeventtoqueue"),t=t||{},t.bannerid||(t.bannerid=bectabartype),beprint("beCtaCallBeEndpoint bectabartype="+bectabartype+", opts.bannerid="+t.bannerid);var c=beCtaGetApiData(e,t);c&&beCtaPostEndpoint(s,c,n,a)}function bectabarSet(e){function t(e,t,n){n=n||0,setTimeout(function(){beCtaCallBeEndpoint(e,t)},n)}bectabarpanelstyle="",mobilebectabarpanelstyle="",bectabarbuttonstyle="",mobilebectabarbuttonstyle="",bectabartext="",mobilebectabartext="",bectabarlink="#",mobilebectabarlink="#",bectabarselector="",bectabarpos="",bectabarinterval=BE_CTA_BAR_CONFIG&&BE_CTA_BAR_CONFIG.settings&&BE_CTA_BAR_CONFIG.settings.popup_interval,bectabarinterval=void 0!==bectabarinterval&&0<parseInt(bectabarinterval)?bectabarinterval:void 0;var n=document.getElementById(BE_CTA_BAR_SCRIPT_ID);n?(bectabarpanelstyle=beGetAttrVal(n,"data-bectabarpanelstyle",bectabarpanelstyle),bectabarbuttonstyle=beGetAttrVal(n,"data-bectabarbuttonstyle",bectabarbuttonstyle),bectabartext=beGetAttrVal(n,"data-bectabartext",bectabartext),bectabarlink=beGetAttrVal(n,"data-bectabarlink",bectabarlink),mobilebectabarpanelstyle=beGetAttrVal(n,"data-mobilebectabarpanelstyle",mobilebectabarpanelstyle),mobilebectabarbuttonstyle=beGetAttrVal(n,"data-mobilebectabarbuttonstyle",mobilebectabarbuttonstyle),mobilebectabartext=beGetAttrVal(n,"data-mobilebectabartext",mobilebectabartext),mobilebectabarlink=beGetAttrVal(n,"data-mobilebectabarlink",mobilebectabarlink)):e&&(bectabarpanelstyle=beGetConfigVal(e,"data-bectabarpanelstyle",bectabarpanelstyle),bectabarbuttonstyle=beGetConfigVal(e,"data-bectabarbuttonstyle",bectabarbuttonstyle),bectabartext=beGetConfigVal(e,"data-bectabartext",bectabartext),bectabarlink=beGetConfigVal(e,"data-bectabarlink",bectabarlink),mobilebectabarpanelstyle=beGetConfigVal(e,"data-mobilebectabarpanelstyle",mobilebectabarpanelstyle),mobilebectabarbuttonstyle=beGetConfigVal(e,"data-mobilebectabarbuttonstyle",mobilebectabarbuttonstyle),mobilebectabartext=beGetConfigVal(e,"data-mobilebectabartext",mobilebectabartext),mobilebectabarlink=beGetConfigVal(e,"data-mobilebectabarlink",mobilebectabarlink)),beprint("bectabartype="+bectabartype);var a,i=beCtaBarGetDefinition(bectabartype);if(i){if(beprint("found ctabar definition"),i.config){beprint("ctabar has config"),bectabarselector=i.config.selector,bectabarpos=i.config.position,bectabardelay=i.config.popup_delay,befullhtmltext=i.config.desktop_view,mobilebefullhtmltext=i.config.mobile_view,bectabarfunctions=i.config.control,bectabarstylesheet=i.config.stylesheet,a=i.config.animations,void 0===bectabarinterval&&(bectabarinterval=i.config.popup_interval,bectabarinterval=void 0!==bectabarinterval&&0<parseInt(bectabarinterval)?bectabarinterval:void 0);var r=begetParameterByName("bectabar-nodefaultinterval"),o=864e5;(void 0===bectabarinterval||bectabarinterval<o&&"true"!==r)&&(bectabarinterval=o)}i.convertinfo&&beprint("ctabar has convertinfo")}else beprint("NOT found ctabar definition");var s=begetParameterByName("bectabar-forcepopup");if(s&&("true"===s||!0===s)&&(bectabarinterval=void 0),beprint("bectabarselector="+bectabarselector),beprint("bectabarpos="+bectabarpos),beprint("bectabarforcepopup="+s),beprint("bectabardelay="+bectabardelay),beprint("bectabarinterval="+bectabarinterval),beprint("bectabarfunctions="+bectabarfunctions),beprint("bectabarstylesheet="+bectabarstylesheet),beprint("data-fullhtmltext="+befullhtmltext),beprint("data-mobilefullhtmltext="+mobilebefullhtmltext),BE_CTA_BAR_CONFIG&&BE_CTA_BAR_CONFIG.settings&&BE_CTA_BAR_CONFIG.settings.noncta_list){var c=BE_CTA_BAR_CONFIG.settings.noncta_list;beprint(">>> injecting non-ctabar cta events: "+c.length);var d=BE_CTA_BAR_CONFIG.settings.event_delay||1;(0===d||"0"===d)&&(d=1),setTimeout(function(){beprint(">>> injecting non-ctabar cta events after "+d+"ms delay");for(var e,t=0;t<c.length;t++){e=c[t].iframe_selectors,e?0===e.length&&(e=["body"]):e=["body"],beprint(" ["+t+"] injecting non-ctabar cta event, frames.len:"+e.length+", target="+c[t].target);for(var n=0;n<e.length;n++){var a=document.querySelector(e[n]),r=null;if("body"===e[n]?r=a:(r=a.contentWindow||a.contentDocument,r.document&&(r=r.document)),r&&c[t].selectors){beprint(" ["+t+"] injecting non-ctabar cta event, name="+c[t].name+", selectors.len="+c[t].selectors.length);for(var o=0;o<c[t].selectors.length;o++){beprint(" ["+t+"] injecting non-ctabar cta event, name="+c[t].name+", selector["+o+"]="+c[t].selectors[o]);var s=r.querySelector(c[t].selectors[o]);if(s){s.setAttribute("data-becta-name",c[t].name),s.setAttribute("data-becta-nbstype",c[t].type),s.setAttribute("data-becta-nbs",bectabaroutofrange),bectabaroutofrange&&s.setAttribute("data-becta-nbsid",bectabarnoshowbanner);var l=c[t].target||"";l&&(-1==l.indexOf("http")&&s.setAttribute("data-becta-target",l),"Popup"===l&&s.setAttribute("data-becta-convert",c[t].convert)),s.addEventListener("click",function(e){function t(e,t,n){t=t||0,setTimeout(function(){beCtaCallBeEndpoint(e,{bannerid:i,ctaid:a,element:n||this})},t)}var a=this.getAttribute("data-becta-name");a=a.startsWith("noncta_")?a:"noncta_"+a;var i,r=this.getAttribute("data-becta-nbs"),o=this.getAttribute("data-becta-nbstype"),s=this.getAttribute("data-becta-target"),c=this.getAttribute("data-becta-convert"),d=beCtaGetBannerIdFromCookie(),l=beCtaGetClickedBannerIdFromCookie(),b=BE_ACT_CLICK,g=BE_ACT_CONVERTSHOW,p=BE_ACT_CONVERT;r=!l,!0==r?(b=BE_ACT_NONCTA_CLICK,g=BE_ACT_NONCTA_CONVERTSHOW,p=BE_ACT_NONCTA_CONVERT,o,i=l||"unknown",beprint("*clicked cta name="+a+", ctanbs="+r+", ctashown="+d+", ctaclicked="+l+", ctanbsid="+i+", action="+b+", ctatarget="+s+", ctaconvert="+c)):(b=BE_ACT_CLICK,o,i=l||"unknown",beprint("clicked cta name="+a+", ctanbs="+r+", ctashown="+d+", ctaclicked="+l+", ctanbsid="+i+", action="+b+", ctatarget="+s+", ctaconvert="+c)),"Popup"!==s&&("Form"===o||"Page"===o)||(t(g,30,this),"Form"!==o&&"Page"!==o&&t(p,60,this)),"Popup"===s&&c&&(beprint("try to add listener to site popup button... ctaconvert="+c),setTimeout(function(){var e=BE_CTA_BAR_CONFIG.settings.convert_list||[];if(beprint("checking convert_list.len="+e.length),0<e.length)for(var t=0;t<e.length;t++)if(beprint(t+": checking noncta-convert="+c+" vs convert.name="+e[t].name),c===e[t].name&&e[t].selectors){for(var a=0;a<e[t].selectors.length;a++){beprint(" **["+t+"]["+n+"] checking for selector["+a+"]="+e[t].selectors[a]);var r=document.querySelector(e[t].selectors[a]);if(r){beprint(" **["+t+"]["+n+"] convert selector found");var o=r.getAttribute("data-becta-name");if(!o){beprint(" **["+t+"]["+n+"] no becta injected yet, doing the injection now"),beCtaAddConvertPageTracking(!0,!0,null);break}else beprint(" **["+t+"]["+n+"] already have becta injected")}else beprint(" **["+t+"]["+n+"] convert selector NOT found")}break}},300))},!0),beprint(" ["+t+"] injected non-ctabar cta event, name="+c[t].name)}else beprint(" ["+t+"] selector not found for name="+c[t].name)}}}}},d)}var l=document.createElement("div");l.id=BE_CTA_BAR_ID;var b;if(bectabarselector&&(b=document.querySelector(bectabarselector)),b){function e(e){if(e){var n=beCtaIsPageConvert(),a=beCtaIsPageSameLastPage();beprint("noshow-bannerid="+bectabarnoshowbanner+", bectabaroutofrange?"+bectabaroutofrange+", isConvertPage?"+n+", currSameLastPage?"+a);var i=168000;if(bectabaroutofrange)beprint("[NO-BANNER]: no banner"),besetCookieInHours("BE_CTA_BANNER_"+bectabarcustomerId,bectabarnoshowbanner,168000),besetCookieInHours("BE_CTA_BANNER_NORANGE","true",168000),t(BE_ACT_NONCTA_PAGEVIEW),t(BE_ACT_NONCTA_SHOW,null,30);else if(n&&a)beprint("[NO-BANNER]: do not log pageview/show since it is coming from same convert page");else{beprint("[BANNER]: show"),besetCookieInHours("BE_CTA_BANNER_"+bectabarcustomerId,bectabartype,168000),beeraseCookie("BE_CTA_BANNER_NORANGE"),beCtaCallBeEndpoint(BE_ACT_PAGEVIEW);var r=30;e.config.animations&&e.config.animations.animation_delay&&(r=parseInt(e.config.animations.animation_delay)+200),setTimeout(function(){var e=document.getElementById(BE_CTA_BAR_PANEL);e?(beprint("after "+r+"ms, it has ctabar panel. bectabarinterval="+bectabarinterval),beCtaCallBeEndpoint(BE_ACT_SHOW)):beprint("after "+r+"ms, no ctabar panel!")},r)}}}"firstChild"===bectabarpos?b.childNodes&&(-1<navigator.userAgent.indexOf("MSIE")||-1<navigator.userAgent.indexOf("Trident/"))?b.insertBefore(l,b.childNodes[0]):b.prepend(l):b.appendChild(l);var g=document.getElementById(BE_CTA_BAR_ID);if(g){function t(){var e=document.getElementById(BE_CTA_BAR_POPUP);if(e&&"none"!==e.style.display&&(beCtaHideElem(e),beCtaIsPopupDisabledOnEscape())){var t=beCtaGetPopupEscInterval();beCtaBarDisablePopups(t)}}function n(){var e=document.getElementById(BE_CTA_BAR_DIALOG_ID);e&&"none"!==e.style.display&&beCtaHideElem(e)}function r(e){var t=document.querySelectorAll("div#bebannerid [onclick]");if(t&&0<t.length)for(var n=0;n<t.length;n++)t[n].addEventListener("keydown",function(e){(13==e.keyCode||32==e.keyCode)&&this.click()});else e||setTimeout(function(){r(!0)},2e3)}var p=beCtaIsDesktop();if(p?befullhtmltext&&(g.innerHTML=befullhtmltext):mobilebefullhtmltext&&(g.innerHTML=mobilebefullhtmltext),a){beprint("handling animations");var u=a.desktop_selector,f=a.mobile_selector,m=beCtaIsDesktop()?u:f;if(beprint("animations selector:"+m),m){function e(){h>=T.length&&(h=0),beprint("animations hideShowCtabar index="+h+", selector="+m);var e=document.querySelector(m);if(e){beprint("animations elem="+e);var t=T[h].mobile;beCtaIsDesktop()&&(t=T[h].desktop),beprint("animations html="+t),e.innerHTML=t;var n=_?e.querySelector(_):e.firstChild;beprint("animations animateElem="+n),E&&"fadeIn"===E?beCtaFadeIn(n,v):beCtaShowElem(n)}h++}var h=0,y=a.transition_delay||9e3,_=a.animate_selector,v=a.animation_delay||1500,E=a.animation_style||"fadeIn",T=a.views||[];if(beprint("animations transition_delay:"+y),beprint("animations animate_selector:"+_),beprint("animations animation_delay:"+v),beprint("animations animation_style:"+E),beprint("animations bectabar_elems size:"+T.length),E&&"fadeIn"===E){var C=document.querySelector(m);if(C){beprint("animations fadeIn for firstElem:"+C+", child.len="+C.childNodes.length);var A;_?(A=C.querySelector(_),beprint("animations animateElem (selector):"+A)):C.childNodes&&0<C.childNodes.length&&(beprint("animations firstElem.firstChild.nodeType:"+C.firstChild.nodeType),C.firstChild.nodeType==Node.ELEMENT_NODE?(A=C.firstChild,beprint("animations firstElem (firstChild)="+A)):(A=C,beprint("animations firstElem="+A))),beCtaFadeOut(A,v,e)}}else e();setInterval(e,y)}}else beprint("no animations");setTimeout(beCtaBarInitKeyCode,1e3),e(i),beCtaAddStylesheet(bectabarstylesheet);var k=beCtaIsPageConvert(),B=beCtaIsPageSameLastPage(),w=document.getElementById(BE_CTA_BAR_POPUP),N=document.getElementById(BE_CTA_BAR_DIALOG_ID);if(beprint("popup="+w+", ctabardialog="+N+", isConvertPage?"+k+", currSameLastPage?"+B),k&&B)beprint("do not show banner since it is coming from same convert page");else if(w||N){var I=bectabardelay;beprint(" has popup/dialog, delay="+bectabardelay+", type(delay)="+typeof bectabardelay);var R=document.getElementById(BE_CTA_BAR_POPUP),O=s&&("true"===s||!0===s);if(beprint(" tmppopup="+R+", tmpforcepopup="+O),"undefined"!=typeof bectabardelay&&R){function e(){beprint(" enable popup, delay="+I+"ms"),setTimeout(function(){beprint(" popup mode, showing it after "+I+"ms: "+P),R=document.getElementById(BE_CTA_BAR_POPUP);var e=beCtaBarIsPopupsDisabled(),t=!0;if(beprint(" popup="+R+", disabledPopups="+e+", tmpforcepopup="+O+", bectabarinterval="+bectabarinterval),e&&!O)t=!1;else if(R&&bectabarinterval){var n=begetCookie("BE_CTA_TIMESTAMP_"+bectabarcustomerId);beprint(" last popup banner shown timestamp="+n),n?t=!1:besetCookieInMins("BE_CTA_TIMESTAMP_"+bectabarcustomerId,""+new Date().getTime(),bectabarinterval/1e3/60)}if(beprint(" popup="+R+", show it?"+t),R&&t){R.style.display=P;var a=document.getElementById(BE_CTA_BAR_PANEL);a||beCtaCallBeEndpoint(BE_ACT_SHOW,{element:R})}},parseInt(I))}O?(I=0,beprint(" has popup/dialog delay but forcing to show it now, overriding delay to 0")):beprint(" has popup/dialog with delay:"+bectabardelay);var P=R.style.display;"none"===P?P="block":R.style.display="none",beCtaIsPopupActivateOnScroll()&&!O?(beprint(" popup should be activated on scroll"),document.addEventListener("scroll",function(){bectabarpopuponscroll||(e(),bectabarpopuponscroll=!0)})):e()}else beprint(" has popup/dialog but no delay or delay < 0");window.addEventListener("keydown",function(a){if(27==a.keyCode||"Esc"==a.key||"Escape"==a.key){var e=document.getElementById(BE_CTA_BAR_DIALOG_ID);e&&"none"!==e.style.display?n():t()}}),window.addEventListener("click",function(a){a.target.id===BE_CTA_BAR_POPUP?t():a.target.id===BE_CTA_BAR_DIALOG_ID&&n()}),setTimeout(function(){r(!1)},2e3)}}if(bectabarfunctions&&0<bectabarfunctions.length){beprint(">>> injecting bectabar control funcs");var S=document.getElementsByTagName("script")[0];if(S){var L=document.createElement("script");L.type="text/javascript",L.id=BE_CTA_BAR_CONTROLS_ID,L.async="true",L.innerHTML=bectabarfunctions,S.parentNode.appendChild(L)}}}else{if(i)beprint("[NO-BANNER]: with ctabar definition but selector '"+bectabarselector+"' not found"),t(BE_ACT_PAGEVIEW),t(BE_ACT_NO_SHOW_SELECTOR_NOTFOUND,null,30);else if(bectabartype)beprint("[NO-BANNER]: has bannerid but no ctabar defined"),t(BE_ACT_PAGEVIEW),t(BE_ACT_NO_SHOW_NO_BAR_DEFINED,null,30);else if(bectabaroutofrange){beprint("[NO-BANNER]: no banner due to outofrange... bectabarnoshowbanner="+bectabarnoshowbanner);var j=null;besetCookieInHours("BE_CTA_BANNER_"+bectabarcustomerId,bectabarnoshowbanner,j),besetCookieInHours("BE_CTA_BANNER_NORANGE","true",j),t(BE_ACT_NONCTA_PAGEVIEW,{bannerid:bectabarnoshowbanner||""}),t(BE_ACT_NONCTA_SHOW,{bannerid:bectabarnoshowbanner||""},30)}else beprint("[NO-BANNER]: no banner at all, pls check the settings: pages, device, days_hours"),t(BE_ACT_PAGEVIEW),t(BE_ACT_NO_SHOW,null,30);return}var M=window.matchMedia("(max-width: "+BE_DESKTOP_SCREEN+"px)");M.addListener(beCtaScreensizeAdjust),beCtaScreensizeAdjust(M)}function beCtaScreensizeAdjust(e){if(e.matches){if(beprint("mobile Layout"),!mobilebefullhtmltext){var t=document.getElementById(BE_CTA_BAR_PANEL);t&&mobilebectabarpanelstyle&&(t.style=mobilebectabarpanelstyle);var n=document.getElementById(BE_CTA_BAR_CTAID);n&&mobilebectabarbuttonstyle&&(n.style=mobilebectabarbuttonstyle)}else{var a=document.getElementById(BE_CTA_BAR_ID);a&&(a.innerHTML=mobilebefullhtmltext)}}else if(beprint("Desktop Layout"),!befullhtmltext){var t=document.getElementById(BE_CTA_BAR_PANEL);t&&bectabarpanelstyle&&(t.style=bectabarpanelstyle);var n=document.getElementById(BE_CTA_BAR_CTAID);n&&bectabarbuttonstyle&&(n.style=bectabarbuttonstyle)}else{var a=document.getElementById(BE_CTA_BAR_ID);a&&(a.innerHTML=befullhtmltext)}}function besetCookie(e,t,n){beeraseCookie(e);var a="";if(n){var i=new Date;i.setTime(i.getTime()+1e3*(60*(60*(24*n)))),a="; expires="+i.toUTCString()}document.cookie=e+"="+(t||"")+a+"; path=/"}function besetCookieInHours(e,t,n){beeraseCookie(e);var a="";if(n){var i=new Date;i.setTime(i.getTime()+1e3*(60*(60*n))),a="; expires="+i.toUTCString()}document.cookie=e+"="+(t||"")+a+"; path=/"}function besetCookieInMins(e,t,n){beeraseCookie(e);var a="";if(n){var i=new Date;i.setTime(i.getTime()+1e3*(60*n)),a="; expires="+i.toUTCString()}document.cookie=e+"="+(t||"")+a+"; path=/"}function begetCookie(e){for(var t,n=e+"=",a=document.cookie.split(";"),r=0;r<a.length;r++){for(t=a[r];" "==t.charAt(0);)t=t.substring(1,t.length);if(0==t.indexOf(n))return t.substring(n.length,t.length)}return null}function beeraseCookie(e){document.cookie=e+"=; Max-Age=-99999999;"}function beprint(){bectabardebug&&console.log.apply(null,arguments)}function beCtaBarButtonClick(e,t,n,a,i){t=t||BE_ACT_CLICK;var r=BE_PAGETYPE_PAGE;t===BE_ACT_SUBMIT&&(t=BE_ACT_CONVERT,r=BE_PAGETYPE_FORM),beCtaBarButtonClickV2(e,t,n,r,i)}function beCtaBarButtonClickV2(e,t,n,a,i){function r(t,n){beCtaCallBeEndpoint(t,{element:e,pageType:n},function(){n&&n===BE_PAGETYPE_FORM&&beCtaBarDialogOpen("Success!")})}function o(){setTimeout(function(){var t=beCtaIsDesktop()?bectabarlink:mobilebectabarlink;t&&"#"!==t||(t=e&&e.href||"#"),t&&"#"!==t&&window.open(t,"_self")},500)}function s(e,t,n){n=n||0,setTimeout(function(){beprint("logging "+e+" pageType="+t+", after "+n+"ms"),r(e,t)},n)}if(t=t?t.toLowerCase():BE_ACT_CLICK,a=a||BE_PAGETYPE_PAGE,beprint("beCtaBarButtonClickV2 action="+t+", bectabartype="+bectabartype+", bectabarnoshowbanner="+bectabarnoshowbanner+", pageType="+a+", link="+n),t===BE_ACT_CLICK&&beCtaSetClickedBannerIdToCookie(),t===BE_ACT_CLICK||t===BE_ACT_CONVERT&&a!==BE_PAGETYPE_FORM&&a!==BE_PAGETYPE_FORM_WITH_VALIDATE){if(n&&(0<=n.indexOf("tel:")||0<=n.indexOf("http"))){beCtaIsDesktop()?bectabarlink=n:mobilebectabarlink=n;var c=!1;return n&&0<=n.indexOf("tel:")?(t=BE_ACT_CONVERT,a=BE_PAGETYPE_CALL,c=!0):a===BE_PAGETYPE_DOWNLOAD&&(t=BE_ACT_CONVERT,c=!0),beprint("clicktoconvert? "+c),c?(s(BE_ACT_CLICK),s(BE_ACT_CONVERTSHOW,null,1e3),s(t,a,2e3)):r(t,a),o(),void(i&&"function"==typeof i&&i())}}else if(a===BE_PAGETYPE_FORM_WITH_VALIDATE&&"function"==typeof beCtaCustomValidateForm&&!beCtaCustomValidateForm())return;r(t,a);var d=document.getElementById(BE_CTA_BAR_POPUP);d?(beCtaBarPopupOpen(),setTimeout(function(){e=null;var t=d.getAttribute("data-becta-convert");t&&"true"===t?(beprint("this is a convertshow popup"),r(BE_ACT_CONVERTSHOW)):beprint("this is a show popup?")},30)):o(),i&&"function"==typeof i&&i()}function beCtaBarClose(){var e=document.getElementById(BE_CTA_BAR_PANEL);beCtaHideElem(e),beCtaClearTabIndex("#"+BE_CTA_BAR_ID+" [tabindex]")}function beCtaBarPopupClose(){var e=document.getElementById(BE_CTA_BAR_POPUP);if(beCtaHideElem(e),beCtaClearTabIndex("#"+BE_CTA_BAR_ID+" [tabindex]"),beCtaIsPopupDisabledOnClose()){var t=beCtaGetPopupCloseInterval();beCtaBarDisablePopups(t)}}function beCtaBarPopupOpen(){var e=document.getElementById(BE_CTA_BAR_POPUP);e&&(e.style.display="block")}function beCtaBarPopupButtonSubmit(e,t,n,a,i){beCtaBarPopupButtonClickV2(e,BE_ACT_CONVERT,t,BE_PAGETYPE_FORM_WITH_VALIDATE,n,a,i)}function beCtaBarPopupButtonClick(e,t,n,a,i,r){var o=BE_PAGETYPE_PAGE;t&&t===BE_ACT_SUBMIT&&(t=BE_ACT_CONVERT,o=BE_PAGETYPE_FORM_WITH_VALIDATE),beCtaBarPopupButtonClickV2(e,t,n,o,a,i,r)}function beCtaBarPopupButtonClickV2(e,t,n,a,i,r,o){function s(e,t,n){t=t||0,setTimeout(function(){beprint("onsubmit logging "+e+" after "+t+"ms, invokeCallback?"+n),c(e,n)},t)}function c(t,n){beCtaCallBeEndpoint(t,{element:e,pageType:a},function(e){a!==BE_PAGETYPE_FORM&&a!==BE_PAGETYPE_FORM_WITH_VALIDATE||i||(beCtaBarPopupClose(),beCtaBarDialogOpen("Success!")),"function"==typeof beCtaCallCustomerEndpoint&&beCtaCallCustomerEndpoint(function(e){beprint("beCtaCallCustomerEndpoint success: "+e)}),n&&r&&"function"==typeof r&&r(e)},function(e){beprint("doCallEndpoint error",e),n&&o&&"function"==typeof o&&o(e)})}if(t=t?t.toLowerCase():BE_ACT_CONVERT,a=a||BE_PAGETYPE_PAGE,beprint("beCtaBarPopupButtonClickV2 action="+t+", pageType="+a+", link="+n+", bectabartype="+bectabartype+", bectabarnoshowbanner="+bectabarnoshowbanner+", bectabardelay="+bectabardelay),t===BE_ACT_CLICK||t===BE_ACT_CONVERT){if(a===BE_PAGETYPE_FORM_WITH_VALIDATE&&beCtaIsPopupDisabledOnConvert()){var d=beCtaGetPopupConvertInterval();beCtaBarDisablePopups(d)}if(t===BE_ACT_CONVERT&&a===BE_PAGETYPE_FORM_WITH_VALIDATE){var l=document.getElementById(BE_CTA_BAR_PANEL);l&&("undefined"==typeof bectabardelay||0===parseInt(bectabardelay))?s(t,0,!0):(s(BE_ACT_CLICK,0,!0),beCtaSetClickedBannerIdToCookie(),s(BE_ACT_CONVERTSHOW,1e3),s(t,2e3))}else if(n&&(0<=n.indexOf("tel:")||0<=n.indexOf("http"))){var b=!1;n&&0<=n.indexOf("tel:")?(t=BE_ACT_CONVERT,a=BE_PAGETYPE_CALL,b=!0):a===BE_PAGETYPE_DOWNLOAD&&(t=BE_ACT_CONVERT,b=!0),beprint("clicktoconvert? "+b),b?(s(BE_ACT_CLICK,0,!0),beCtaSetClickedBannerIdToCookie(),s(BE_ACT_CONVERTSHOW,1e3),s(t,2e3)):(t===BE_ACT_CLICK&&beCtaSetClickedBannerIdToCookie(),c(t,!0))}else c(t,!0);if(n&&"#"!==n||(n=e&&e.href||""),n&&(0<=n.indexOf("tel:")||0<=n.indexOf("http")))return window.open(n,"_self"),!1}else if(a===BE_PAGETYPE_FORM_WITH_VALIDATE&&"function"==typeof beCtaCustomValidateForm&&beCtaCustomValidateForm()){if(beCtaIsPopupDisabledOnConvert()){var d=beCtaGetPopupConvertInterval();beCtaBarDisablePopups(d)}s(BE_ACT_CLICK,0,!0),beCtaSetClickedBannerIdToCookie(),s(BE_ACT_CONVERTSHOW,1e3),s(t,2e3)}}function beCtaBarDialogOpen(e,t){var n=document.getElementById(BE_CTA_BAR_DIALOG_ID);if(n&&(n.style.display="block",e)){var a=document.getElementById(BE_CTA_BAR_DIALOG_MSG_ID);a&&(a.innerHTML=e,t&&(a.style.color="#ff6666"))}}function beCtaBarDisablePopups(e){var t=bectabarinterval/1e3/60,n=e?e/1e3/60:t;beprint("disabling ctabar popup until "+n+"mins"),besetCookieInMins("BE_CTA_NOPOPUP_"+bectabarcustomerId,"true",n)}function beCtaBarEnablePopups(){beeraseCookie("BE_CTA_NOPOPUP_"+bectabarcustomerId)}function beCtaBarIsPopupsDisabled(){var e=beCtaIsExistingUser();return beprint("existing_user?"+e),e||begetCookie("BE_CTA_NOPOPUP_"+bectabarcustomerId)}function beCtaBarDialogClose(){var e=document.getElementById(BE_CTA_BAR_DIALOG_ID);beCtaHideElem(e)}function beCtaHideElem(e){e&&(e.style.display="none")}function beCtaShowElem(e,t){e&&(e.style.display=t||"block")}function beCtaFadeIn(e,t,n){if(!e)return void(n&&n());t=t||1500,e.style.opacity=0;var a=+new Date,i=function(){e.style.opacity=+e.style.opacity+(new Date-a)/t,a=+new Date,1>+e.style.opacity?window.requestAnimationFrame&&requestAnimationFrame(i)||setTimeout(i,16):n&&n()};i()}function beCtaFadeOut(e,t,n){if(!e)return void(n&&n());t=t||1500,e.style.opacity=1;var a=+new Date,i=function(){e.style.opacity=+e.style.opacity-(new Date-a)/t,a=+new Date,0<+e.style.opacity?window.requestAnimationFrame&&requestAnimationFrame(i)||setTimeout(i,16):n&&n()};i()}function beCtaAllowNumbersOnly(e,t,n){var a=e.which?e.which:e.keyCode;return!(31<a&&(48>a||57<a))&&!(t&&n&&t.value&&t.value.length>=n)}function beCtaAddStylesheet(e,t){if(e&&0<e.length){beprint(">>> injecting ctabar stylesheet");var n=document.createElement("style");n.type="text/css",t&&0<t.length&&(n.media=t),n.innerHTML=e;var a=document.head||document.getElementsByTagName("head")[0];a.appendChild(n)}}function beCtaSetTabIndex(e){var t=document.querySelectorAll(e);beCtaSetTabIndexForElems(t)}function beCtaSetTabIndexForElems(e){if(beprint("setting tab index for these elements: "+e),e&&0<e.length)for(var t=0;t<e.length;t++)e[t].setAttribute("tabindex",t+1)}function beCtaClearTabIndex(e){var t=document.querySelectorAll(e);if(beprint("clearing tab index for these elements: "+t),t&&0<t.length)for(var n=0;n<t.length;n++)t[n].setAttribute("tabindex","-1")}function beCtaBarInitKeyCode(e){var t=document.querySelectorAll("#"+BE_CTA_BAR_ID+" [role], #"+BE_CTA_BAR_ID+" [tabindex], #"+BE_CTA_BAR_ID+" [data-bectakeypress], #"+BE_CTA_BAR_ID+" [onclick], #"+BE_CTA_BAR_ID+" button, #"+BE_CTA_BAR_ID+" a, #"+BE_CTA_BAR_ID+" input[type='submit']");if(t&&0<t.length){beprint("setting key press for these elements: "+t);for(var n=0;n<t.length;n++)t[n].addEventListener("keydown",function(e){(13==e.keyCode||32==e.keyCode)&&this.click()});beprint("Key press events set for CTA."),beCtaBarFocusCta()}else e||(beprint("No elements found to set key press event. Trying again in 2 seconds."),setTimeout(function(){beCtaBarInitKeyCode(!0)},2e3))}function beCtaBarFocusCta(){document.getElementById(BE_CTA_BAR_PANEL)&&(bectabardelay=1);var e=(bectabardelay||1e4)+500;beprint("Initiating CTA focus trigger in "+e/1e3+"sec."),setTimeout(function(){var t=document.querySelector("#"+BE_CTA_BAR_POPUP+", #"+BE_CTA_BAR_PANEL);beprint("becta focus CTA after "+e+"ms, CTA="+t),t&&(beprint("becta focus CTA display="+t.style.display),"none"!==t.style.display&&(document.activeElement.blur(),beprint("becta focus CTA focusing now"),t.focus()))},e)}function bectabarSome(e,t){if(Array.prototype.some)return e.some(t);for(var n=0;n<e.length;n++)if(t(e[n]))return!0;return!1}