define(['uiComponent','jquery','ko','mage/translate','Magento_Customer/js/action/login','mage/url','Magento_Customer/js/customer-data'],function(Component,$,ko,$t,loginAction,url,customerData){'use strict';if(!$('.open-customer-mini-login').hasClass('active')){$('.open-customer-mini-login').click(function(){$('.customer-links').addClass('active').css('display','block');$('.showlogin').addClass('active');$('.showlogin').next().css('display','block');});}
return Component.extend({registerUrl:window.authenticationPopup.customerRegisterUrl,redirectB2bUrl:'https://b2b.montanasilversmiths.com/',forgotPasswordUrl:window.authenticationPopup.customerForgotPasswordUrl,autocomplete:window.checkout.autocomplete,isLoading:ko.observable(false),isActive:function(){var customer=customerData.get('customer');return customer()==false;},initialize:function(){var self=this;this._super();url.setBaseUrl(window.authenticationPopup.baseUrl);loginAction.registerLoginCallback(function(){self.isLoading(false);});this.closeSidebar();},login:function(loginForm){var loginData={},formDataArray=$(loginForm).serializeArray();formDataArray.forEach(function(entry){loginData[entry.name]=entry.value;});if($(loginForm).validation()&&$(loginForm).validation('isValid')){this.isLoading(true);loginAction(loginData,null,false);}},forgotpwd:function(theForm){var loginData={},formDataArray=$(theForm).serializeArray();formDataArray.forEach(function(entry){loginData[entry.name]=entry.value;});if($(theForm).validation()&&$(theForm).validation('isValid')){theForm.submit();}},callForgotPwdForm:function(){if($('#forgotpwd-form').hasClass('no-display')){$('#forgotpwd-form').removeClass('no-display');}
else{$('#forgotpwd-form').addClass('no-display');}
return false;},closeSidebar:function(){var mini_login=$('.customer-links');mini_login.on('click','[data-action="close"]',function(event){event.stopPropagation();if($(this).hasClass("mobile")){mini_login=$('[data-block="mini_login"]');}
mini_login.find('[data-role="dropdownDialog"]').dropdownDialog("close");$('.showlogin').next().css('display','none');});return true;}});});